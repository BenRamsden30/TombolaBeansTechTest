@page "/order"

@using TombolaBeansTechTest.Services
@inject CoffeBeanService coffeBeanService
@inject NavigationManager navigationManager


<h3>Order Coffee Beans</h3>
<select @bind="selectedBeanId" class="form-control mb-3">
    <option value="">Select a Coffee Bean</option>
    @foreach (var bean in coffeBeanService.GetAllBeans())
    {
        <option value="@bean.Id">@bean.Name</option>
    }
</select>

<input @bind="quantity" type="number" placeholder="Quantity" class="form-control mb-3" />
<button class="btn btn-primary" @onclick="SubmitOrder">Submit Order</button>

@code {
    private string selectedBeanId;
    private int quantity = 1;

    private void SubmitOrder()
    {
        if (selectedBeanId != "0" && quantity > 0)
        {
            navigationManager.NavigateTo("/");
            Console.WriteLine($"Order placed: {quantity} units of Bean ID {selectedBeanId}");
        }
    }
}